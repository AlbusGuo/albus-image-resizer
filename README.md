# Image Resizer Plugin for Obsidian

一个用于 Obsidian 的图片调整大小插件，允许通过鼠标拖拽轻松调整图片大小。

## 功能特性

- 🖱️ **拖拽调整大小**: 通过拖拽图片右下角来调整图片大小
- 📏 **精确控制**: 支持设置调整间隔，实现像素级精确控制
- 🎯 **智能检测**: 可配置边缘检测区域大小
- 📊 **多场景支持**: 支持表格、Callout、Excalidraw 等场景中的图片调整
- � **链接兼容**: 支持内部链接和外部链接的图片
- 🎨 **主题适配**: 支持深色主题和高对比度模式
- ⚙️ **灵活配置**: 提供丰富的设置选项
- 🐛 **调试模式**: 内置调试模式便于问题排查

## 项目结构

```
src/
├── settings/              # 设置相关
│   ├── types.ts          # 设置类型定义和默认值
│   ├── settings-tab.ts   # 设置页面组件
│   └── index.ts          # 导出文件
├── handlers/              # 事件处理器
│   ├── resize-handler.ts # 图片调整大小处理器
│   └── index.ts          # 导出文件
├── utils/                 # 工具类
│   ├── link-update-service.ts # 链接更新服务
│   └── index.ts          # 导出文件
├── styles/                # 样式文件
│   └── image-resizer.css # 插件专用样式
├── types/                 # 类型定义
│   ├── plugin.ts         # 插件接口定义
│   └── index.ts          # 导出文件
└── main.ts               # 插件入口文件
```

## 安装和使用

### 安装

1. 下载最新版本的插件文件
2. 将插件文件夹复制到 `<Vault>/.obsidian/plugins/albus-image-resizer/`
3. 在 Obsidian 中启用插件

### 使用方法

1. 在编辑模式下，将鼠标移动到图片右下角
2. 当鼠标变为调整大小光标时，按住并拖拽
3. 释放鼠标完成调整

## 设置选项

- **启用拖拽调整大小**: 开启/关闭拖拽调整功能
- **调整大小的时间间隔**: 设置调整的最小刻度（0表示不对齐刻度）
- **边缘检测区域大小**: 设置触发调整的边缘区域大小（5-150像素）
- **调试模式**: 启用/禁用调试日志输出

## 技术实现

### 架构设计

项目采用模块化设计，遵循单一职责原则：

- **主插件类**: 负责插件生命周期管理和模块协调
- **设置模块**: 处理用户配置和设置界面
- **处理器模块**: 负责鼠标事件处理和拖拽逻辑
- **工具模块**: 提供链接更新等通用功能
- **样式模块**: 独立的CSS样式文件

### 核心功能

1. **事件监听**: 监听鼠标事件，检测拖拽操作
2. **尺寸计算**: 实时计算新尺寸，保持宽高比
3. **链接更新**: 自动更新Markdown中的图片尺寸参数
4. **样式管理**: 动态应用样式，提供视觉反馈

### 兼容性

- ✅ 内部图片链接 `![[image.png|300]]`
- ✅ Markdown图片链接 `![alt](image.png|300)`
- ✅ 外部图片链接
- ✅ 表格中的图片
- ✅ Callout中的图片
- ✅ Excalidraw嵌入图片

## 开发

### 环境要求

- Node.js 18+
- npm

### 开发命令

```bash
# 安装依赖
npm install

# 开发模式（监听文件变化）
npm run dev

# 生产构建
npm run build

# 版本更新
npm run version
```

### 代码规范

- 使用TypeScript进行类型安全开发
- 遵循ESLint代码规范
- 采用模块化设计，低耦合高内聚
- 使用独立的CSS文件管理样式

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！